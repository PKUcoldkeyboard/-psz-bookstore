<html>

<head>
    <meta content="text/html" charset="UTF-8">
    <title>更换头像</title>
    <link rel="stylesheet" th:href="@{main/css/index.css}">
    <link rel="stylesheet" th:href="@{main/styles/upload_avatar.css}">
    <link rel="stylesheet" th:href="@{main/styles/cropper.css}">
    <link rel="stylesheet" th:href="@{main/css/personalcenter.css}">
    <link rel="stylesheet" th:href="@{webjars/sweetalert2/9.15.1/dist/sweetalert2.min.css}">
    <link rel="icon" th:href="@{main/image/logo.png}">
    <style>
        canvas {
        z-index: -1;
        position: absolute;
    }
    </style>
</head>

<body>
    <!-- 导航栏 -->
    <center>
        <div th:replace="main/header::header"></div>
    </center>
    <!--此处为页面主题内容-->
    <div id="index_main">
        <!--填充空间，不写入内容-->
        <div id="index_main_pad"></div>
        <!--个人空间侧导航栏  -->
        <div th:replace="main/sidebar::sidebar(select='1')"></div>
        <!--更换头像部分开始-->
        <div class="container">
            <div class="upload-box">
                <div class="cropper-modal">
                    <div class="overlay"></div>
                    <div class="modal">
                        <div class="modal-head">
                            <div class="head-wrap">
                                <a th:href="@{/studentZone}">我的资料</a>
                                &nbsp;>&nbsp;<a th:href="@{/studentEditInfo}">修改资料</a>
                                &nbsp;>&nbsp;更换头像
                            </div>
                        </div>
                        <div class="modal-content clearfix">
                            <div class="img-clip-wrap">
                                <div class="container-bg">
                                    <div class="img-container">
                                        <img id="clip_src_img" :src="img" @load="srcImgLoaded"/>
                                        <div class="shadow-box"></div>
                                        <div class="crop-wrap" @mousedown="wrapMouseDown">
                                            <div class="shadow-box" :style="recStyle">
                                            	<img :src="img" class="shadow-img" :style="imgStyle">
                                            </div>
                                            <div class="crop-box" @mousedown="boxMouseDown" :class="showBox ? 'show' :''" :style="recStyle">
                                                <span class="drap-point point-lt" @mousedown="pointMouseDown('drag-lt', $event)"></span>
                                                <span class="drap-point point-lb" @mousedown="pointMouseDown('drag-lb', $event)"></span>
                                                <span class="drap-point point-rt" @mousedown="pointMouseDown('drag-rt', $event)"></span>
                                                <span class="drap-point point-rb" @mousedown="pointMouseDown('drag-rb', $event)"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <label for="file_input" class="first-change-lb">
                                    <i class="icon-reset"></i>
                                    <span>选择图片</span>
                                </label>
                                <div class="reset-img" style="display:none">
                                    <label for="file_input">
                                        <i></i>
                                        &nbsp;重新选择
                                    </label>
                                    <input type="file" id="file_input" accept="image/png,image/jpg,image/jpeg">
                                </div>
                            </div>
                            <div class="border-line"></div>
                            <div class="img-preview-wrap">
                                <div class="pre-container" style="background-image:url()">
                                    <img id="clip_res_img" :src="img" style="display:none"/>
                                </div>
                                <div class="pre-info">当前头像</div>
                            </div>
                        </div>
                        <p class="descript">请选择图片上传:大小180*180像素支持JPG、PNG等格式，图片需小于2M</p>
                        <div class="modal-footer">
                            <input type="button" value="更新" class="modal-btn btn-confirm">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 底栏 -->
    <center>
        <div th:replace="main/footer::footer"></div>
    </center>
</body>
<script th:src="@{webjars/jquery/3.5.1/jquery.js}"></script>
<script th:src="@{main/js/Particleground.js}"></script>
<script th:src="@{main/js/index.js}"></script>
<script th:src="@{/webjars/sweetalert2/9.15.1/dist/sweetalert2.all.min.js}"></script>
<script th:src="@{/webjars/sweetalert2/9.15.1/dist/sweetalert2.min.js}"></script>
<script>
$(document).ready(function() {
    //粒子背景特效
    $('body').particleground({
        dotColor: 'white',
        lineColor: 'white'
    });
});
</script>
<script>
window.onload = function() {
    index_navigation();

    window.onresize = function() {
        index_navigation();
    }
    window.onscroll = function() {
        change_index_navigation();
    }
}
</script>

</html>